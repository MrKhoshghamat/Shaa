@model Shaa.Domain.ViewModels.Authorization.RolePermissionViewModel

@{
    ViewData["Title"] = "دسترسی";
}

@* <form asp-controller="Authorization" asp-action="PermissionWindow" class="post d-flex flex-column-fluid" id="RequestServiceWindowBox"> *@
    <div id="kt_content_container" class="container-xxl">
        <input type="hidden" id="RoleId" name="RoleId" value="@Model.RoleId"/>
        <div class="stepper stepper-links d-flex flex-column" id="kt_request_info">
            <div asp-action="RegisterLaboratory" asp-controller="Laboratory" method="post"
                 class="w-100 pt-5 px-5 pb-10 fv-plugins-bootstrap5 fv-plugins-framework" novalidate="novalidate" id="kt_create_account_form">
                <div class="row mb-12">
                    <div class="col-md-6 fv-row">
                        <label class="required fs-6 fw-bold form-label mb-2">نام نقش</label>
                        <input asp-for="RoleTitle" name="TotalCost" class="form-control form-control-lg form-control-solid number-separator"/>
                    </div>
                </div>
                <label class="required fs-6 fw-bold form-label mb-2">دسترسی ها</label>
                <div class="card-body pt-0">
                    <!--begin::Table-->
                    <div id="kt_customers_table_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                        <div class="table-responsive">
                            <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer" id="kt_customers_table">
                                <!--begin::Table head-->
                                <thead>
                                <!--begin::Table row-->
                                <tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
                                    <th class="w-10px pe-2 sorting_disabled" rowspan="1" colspan="1" aria-label="" style="width: 29.25px;">
                                        <div class="form-check form-check-sm form-check-custom form-check-solid me-3">
                                            <input class="form-check-input" type="checkbox" data-kt-check="true" data-kt-check-target="#kt_customers_table .form-check-input" value="1">
                                        </div>
                                    </th>
                                    <th class="min-w-125px sorting" tabindex="0" aria-controls="kt_customers_table" rowspan="1" colspan="1" aria-label="مشتری نام: activate to sort column ascending" style="width: 180.188px;">مشتری نام</th><th class="min-w-125px sorting" tabindex="0" aria-controls="kt_customers_table" rowspan="1" colspan="1" aria-label="ایمیل: activate to sort column ascending" style="width: 210.708px;">ایمیل</th><th class="min-w-125px sorting" tabindex="0" aria-controls="kt_customers_table" rowspan="1" colspan="1" aria-label="کمپانی: activate to sort column ascending" style="width: 180.188px;">کمپانی</th><th class="min-w-125px sorting" tabindex="0" aria-controls="kt_customers_table" rowspan="1" colspan="1" aria-label="روش پرداخت: activate to sort column ascending" style="width: 180.188px;">روش پرداخت</th><th class="min-w-125px sorting" tabindex="0" aria-controls="kt_customers_table" rowspan="1" colspan="1" aria-label="زمان ایجاد تاریخ: activate to sort column ascending" style="width: 238.323px;">زمان ایجاد تاریخ</th><th class="text-end min-w-70px sorting_disabled" rowspan="1" colspan="1" aria-label="عملیات" style="width: 117.656px;">عملیات</th>
                                </tr>
                                <!--end::Table row-->
                                </thead>
                                <!--end::Table head-->
                                <!--begin::Table body-->
                                <tbody class="fw-bold text-gray-600">
                                <tr class="odd">
                                    <!--begin::Checkbox-->
                                    <td>
                                        <div class="form-check form-check-sm form-check-custom form-check-solid">
                                            <input class="form-check-input" type="checkbox" value="1">
                                        </div>
                                    </td>
                                    <!--end::Checkbox-->
                                    <!--begin::نام=-->
                                    <td>
                                        <a href="../../demo1/dist/apps/customers/view.html" class="text-gray-800 text-hover-primary mb-1">مرادی نیا</a>
                                    </td>
                                </tr>
                                </tbody>
                                <!--end::Table body-->
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start">
                                <div class="dataTables_length" id="kt_customers_table_length">
                                    <label>
                                        <select name="kt_customers_table_length" aria-controls="kt_customers_table" class="form-select form-select-sm form-select-solid">
                                            <option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>
                                        </select>
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end">
                                <div class="dataTables_paginate paging_simple_numbers" id="kt_customers_table_paginate">
                                    <ul class="pagination">
                                        <li class="paginate_button page-item previous disabled" id="kt_customers_table_previous">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="0" tabindex="0" class="page-link">
                                                <i class="previous"></i>
                                            </a>
                                        </li>
                                        <li class="paginate_button page-item active">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="1" tabindex="0" class="page-link">1</a>
                                        </li>
                                        <li class="paginate_button page-item ">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="2" tabindex="0" class="page-link">2</a>
                                        </li>
                                        <li class="paginate_button page-item ">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="3" tabindex="0" class="page-link">3</a>
                                        </li>
                                        <li class="paginate_button page-item ">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="4" tabindex="0" class="page-link">4</a>
                                        </li>
                                        <li class="paginate_button page-item next" id="kt_customers_table_next">
                                            <a href="#" aria-controls="kt_customers_table" data-dt-idx="5" tabindex="0" class="page-link">
                                                <i class="next"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--end::Table-->
                </div>
            </div>
        </div>

        <div class="card-footer p-0">

            <!--begin::Actions-->

            <div class="float-end mt-5">
                <a class="btn btn-danger me-2" onclick="closeOpenDialogContent($('#RequestServiceWindowBox'));">
                    <span class="menu-title">انصراف</span>
                </a>
            </div>

            <div class="float-end mt-5">
                <a class="btn btn-success me-2" onclick="AddNewRequestService();">
                    <span class="menu-title">ثبت</span>
                </a>
            </div>
        </div>
    </div>
@* </form> *@


<script>
    var request_service_form = document.querySelector('#RequestServiceWindowBox');
    var request_service_form_Validation = FormValidation.formValidation(request_service_form, {
        fields: {
            ServiceId: { validators: { notEmpty: { message: "لطفا خدمت ارائه شده را انتخاب کنید" } } },
        },
        plugins: {
            trigger: new FormValidation.plugins.Trigger,
            bootstrap: new FormValidation.plugins.Bootstrap5({ rowSelector: ".fv-row", eleInvalidClass: "", eleValidClass: "" })
        }
    });

    var AddNewRequestService = function() { 
        request_service_form_Validation.validate().then((function(vr) {
            if (vr === "Valid") {
                $(request_service_form).ajaxSubmit({
                    success: function(res) {
                        debugger;
                        if (res.success == false) {
                            // failed();

                            if (res.errors)
                                ShowError(res.errors[0].message);
                            else
                                ShowSuccess('عملیات موفقیت آمیز نبود');

                        } else {
                            closeOpenDialogContent($('#RequestServiceWindowBox'));
                            LoadRequestServiceData();

                            if (res.success == true)
                                ShowSuccess('اطلاعات با موفقیت ذخیره شد');
                        }
                    },
                    error: function(e) {
                    }
                });
            }
        }));
    } 
</script>